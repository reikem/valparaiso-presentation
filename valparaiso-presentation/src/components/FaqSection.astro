---
import { Image } from "astro:assets";
import { ChevronDown } from "lucide-astro";
const { title, image, items } = Astro.props;

interface FaqItem {
  question: string;
  answer: string;
}

interface Props {
  title: string;
  image: ImageMetadata;
  items: FaqItem[];
}
---

<section
  class="py-20 px-4 md:px-12 bg-white dark:bg-gray-900 transition-colors duration-500"
>
  <div class="flex flex-col md:flex-row gap-12 items-center">
    <div class="md:w-1/2">
      <h2 class="text-4xl font-serif mb-8 text-black dark:text-gray-200">
        {title}
      </h2>
      <div class="space-y-6">
        {
          items.map((item) => (
            <div class="border-b border-gray-300 dark:border-gray-600 pb-4">
              <button class="w-full flex justify-between items-center text-left py-2 focus:outline-none faq-toggle">
                <h3 class="text-lg font-bold text-gray-800 dark:text-gray-200">
                  {item.question}
                </h3>
                <ChevronDown />
              </button>
              <div class="faq-content mt-2 hidden text-gray-600 dark:text-gray-400">
                <p>{item.answer}</p>
              </div>
            </div>
          ))
        }
      </div>
    </div>
    <div class="md:w-1/2">
      <Image
        src={image}
        alt={title}
        class="w-full h-auto object-cover rounded-md"
      />
    </div>
  </div>
</section>

<script>
  document.querySelectorAll(".faq-toggle").forEach((button) => {
    button.addEventListener("click", () => {
      const content = button.nextElementSibling;
      const icon = button.querySelector("svg");
      content.classList.toggle("hidden");
      icon.classList.toggle("rotate-180");
    });
  });
</script>
